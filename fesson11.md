

## § 4. Динамический расчет в табличных частях

В платформе «1С:Предприятие 8.3» работа с данными на форме происходит через обращение к текущей строке коллекции.

### 1. Обработка событий элементов формы

Процедуры с постфиксом `ПриИзменении` — это обработчики событий. Они срабатывают сразу после того, как пользователь завершил ввод в ячейку (нажал *Enter* или перешел в другое поле).

* **Контекст `&НаКлиенте**`: Эти действия выполняются на компьютере пользователя. Это критически важно для скорости интерфейса: расчет происходит мгновенно, так как системе не нужно отправлять запрос на сервер для простой арифметической операции.

### 2. Алгоритм пересчета

В обеих процедурах используется идентичная логика:

* **Получение данных**: `Элементы.Товары.ТекущиеДанные` позволяет получить доступ к той строке, в которой сейчас стоит курсор.
* **Проверка на `Неопределено**`: Это стандарт «хорошего тона» в разработке. Если пользователь умудрится вызвать событие в пустой таблице, проверка предотвратит критическую ошибку (падение системы).
* **Математическая модель**: Применяется классическая формула:


---



	&НаКлиенте
	Процедура ТоварыКоличествоПриИзменении(Элемент)
	
	ТекСтрока = Элементы.Товары.ТекущиеДанные;
	
	// Исправил If на Если
	Если ТекСтрока <> Неопределено Тогда
		ТекСтрока.Сумма = ТекСтрока.Количество * ТекСтрока.Цена;
	КонецЕсли;
	
	КонецПроцедуры

	// 2. Когда меняем ЦЕНУ -> Пересчитываем Сумму
	&НаКлиенте
	Процедура ТоварыЦенаПриИзменении(Элемент)
	
	ТекСтрока = Элементы.Товары.ТекущиеДанные;
	
	// Исправил If на Если
	Если ТекСтрока <> Неопределено Тогда
		ТекСтрока.Сумма = ТекСтрока.Количество * ТекСтрока.Цена;
	КонецЕсли;
	
	КонецПроцедуры
