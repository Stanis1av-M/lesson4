Вот твой конспект по финальной части производственного цикла в «1С:Предприятии 8.3». Здесь упор сделан на теорию калькуляции и механизмы распределения затрат, без построчного комментирования самого кода.

---

## § 6. Итоговая калькуляция и выпуск готовой продукции

Завершающий этап проведения производственного документа объединяет прямые материальные затраты и косвенные расходы (в данном случае — трудозатраты) для формирования окончательной стоимости выпущенного изделия.

### 1. Механизм получения цен из регистров сведений

Для расчета стоимости работ используется обращение к **периодическим регистрам сведений**.

* **Метод `ПолучитьПоследнее**`: Позволяет системе извлечь актуальную ставку оплаты на конкретный момент времени (дату документа). Это обеспечивает гибкость учета: при изменении стоимости часа работы в будущем, старые документы сохранят корректные расчеты.
* **Обработка пустых значений**: Важным этапом является проверка на `NULL`. Если для вида работ не задана цена, система должна подставить дефолтное значение (0), чтобы избежать прерывания транзакции из-за математических ошибок.

### 2. Синтез полной производственной себестоимости

Итоговая стоимость изделия () рассчитывается как сумма всех накопленных затрат. В данном алгоритме применяется аддитивная модель:



Эта величина является базой для оценки активов предприятия и в дальнейшем будет использоваться при расчете прибыли от реализации.

---

### 3. Регистрация выпуска в учетных контурах

При оприходовании продукции система параллельно обновляет данные в нескольких регистрах накопления, решая разные управленческие задачи:


### 4. Принципы партионного учета при выпуске

Особое внимание заслуживает заполнение измерения **Партия** значением `Ссылка`.

* В момент проведения документ производства сам становится «партией» для выпущенного изделия.
* Это позволяет реализовать **сквозной учет**: при последующей продаже этой продукции система будет знать, каким именно документом она была произведена и какая себестоимость в неё заложена.

### 5. Аналитика затрат для управленческой отчетности

Использование специализированных регистров (например, `ЗатратыНаВыпуск`) позволяет хранить структуру себестоимости в развернутом виде. Это дает возможность менеджменту анализировать, какая доля в цене продукта приходится на сырье, а какая — на оплату труда персонала, что необходимо для оптимизации производства.

	СуммаТруд = 0;
	Для Каждого Стр Из Трудозатраты Цикл
		// Получаем актуальную цену часа работы из Регистра Сведений
		Цены = РегистрыСведений.СтоимостьРабот.ПолучееПоследнее(Дата, Новый Структура("ВидРабот", Стр.ВидРабот));
		ЦенаЗаЧас = ?(Цены.ЦенаЧаса = Null, 0, Цены.ЦенаЧаса);
		СуммаТруд = СуммаТруд + (Стр.Время * ЦенаЗаЧас);
	КонецЦикла;
	
	Всего = СуммаМат + СуммаТруд; // Общая себестоимость произведенной продукции
	
	// --- БЛОК 4: Оприходование готовой продукции ---
	// Увеличиваем остаток готовой продукции на складе
	Дв = Движения.ОстаткиТоваров.Добавить();
	Дв.ВидДвижения = ВидДвиженияНакопления.Приход;
	Дв.Период = Дата;
	Дв.Склад = СкладПродукции;
	Дв.Номенклатура = ВыходноеИзделие;
	Дв.Количество = КоличествоВыход;
	
	// Записываем себестоимость произведенного изделия
	Дв = Движения.СебестоимостьТоваров.Добавить();
	Дв.ВидДвижения = ВидДвиженияНакопления.Приход;
	Дв.Период = Дата;
	Дв.Номенклатура = ВыходноеИзделие;
	Дв.Партия = Ссылка; // Этот документ становится партией для продукции
	Дв.Количество = КоличествоВыход;
	Дв.Стоимость = Всего;
	
	// Фиксируем общие затраты в регистре анализа
	Дв = Движения.ЗатратыНаВыпуск.Добавить();
	Дв.Период = Дата;
	Дв.Продукция = ВыходноеИзделие;
	Дв.МатериальныеРасходы = СуммаМат;
	Дв.Трудозатраты = СуммаТруд;
	КонецПроцедуры
---
